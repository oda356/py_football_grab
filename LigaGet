from urllib.request import urlopen
from selenium import webdriver
from bs4 import BeautifulSoup
from selenium.webdriver.common.by import By
import os
import time


path = os.getcwd()+'\phantomjs.exe'
driver = webdriver.PhantomJS(executable_path=path)
driver.get("http://www.laliga.es/en/laliga-santander#box-resultados-competicion.html")
#get current playday result
plays = driver.find_elements(By.CSS_SELECTOR,".equipos-resultados")
for play in plays:
    teamLocal = play.find_element(By.CSS_SELECTOR,".equipo.local").find_element(By.CSS_SELECTOR,".team")
    playResult = play.find_element(By.CSS_SELECTOR,".hora-resultado").find_element(By.CSS_SELECTOR,".horario-partido")
    teamAway = play.find_element(By.CSS_SELECTOR,".equipo.visitante").find_element(By.CSS_SELECTOR,".team")
    print(teamLocal.text)
    print(playResult.text)
    print(teamAway.text)
time.sleep(1)
#get previous playday result

try:
    leftButton = driver.find_element(By.CSS_SELECTOR, ".flecha_jornada_anterior.pointer.flecha_fecha")
    leftButton.click()
    time.sleep(1)
    plays = driver.find_elements(By.CSS_SELECTOR, ".equipos-resultados")
except Exception as e:
    print(e)
    plays = []


for play in plays:
    teamLocal = play.find_element(By.CSS_SELECTOR,".equipo.local").find_element(By.CSS_SELECTOR,".team")
    playResult = play.find_element(By.CSS_SELECTOR,".hora-resultado").find_element(By.CSS_SELECTOR,".horario-partido")
    teamAway = play.find_element(By.CSS_SELECTOR,".equipo.visitante").find_element(By.CSS_SELECTOR,".team")
    print(teamLocal.text)
    print(playResult.text)
    print(teamAway.text)

#get next playday result
try:
    rightButton = driver.find_element(By.CSS_SELECTOR, ".flecha_jornada_siguiente.pointer.flecha_fecha")
    rightButton.click()
    rightButton = driver.find_element(By.CSS_SELECTOR, ".flecha_jornada_siguiente.pointer.flecha_fecha")
    rightButton.click()
    time.sleep(1)
    plays = driver.find_elements(By.CSS_SELECTOR, ".equipos-resultados")
except Exception as e:
    print(e)
    plays = []
for play in plays:
    teamLocal = play.find_element(By.CSS_SELECTOR,".equipo.local").find_element(By.CSS_SELECTOR,".team")
    playResult = play.find_element(By.CSS_SELECTOR,".hora-resultado").find_element(By.CSS_SELECTOR,".horario-partido")
    teamAway = play.find_element(By.CSS_SELECTOR,".equipo.visitante").find_element(By.CSS_SELECTOR,".team")
    print(teamLocal.text)
    print(playResult.text)
    print(teamAway.text)
